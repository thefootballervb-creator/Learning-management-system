services:
  - type: web
    name: lms-backend
    runtime: docker
    rootDir: Learning-Management-System-main/backend
    plan: free
    autoDeploy: true
    healthCheckPath: /actuator/health

    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: default
      # PORT is automatically set by Render, but we can set a default
      - key: PORT
        value: "8080"

      # Database configuration - MUST be set in Render dashboard after creating MySQL database
      # Go to your MySQL database service in Render and copy the "Internal Database URL"
      # Then add these environment variables in the web service settings:
      # SPRING_DATASOURCE_URL: jdbc:mysql://<host>:<port>/<database>?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
      # SPRING_DATASOURCE_USERNAME: <username>
      # SPRING_DATASOURCE_PASSWORD: <password>
